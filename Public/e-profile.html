<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SeniorSync Profile</title>
  <link rel="stylesheet" href="CSS/e-profile.css">
</head>
<body>
<header>
    <link rel="stylesheet" href="CSS/e-navbar.css">
    <nav class="navbar">
        <div class="nav-logo"><img src="Assets/logo.png" alt="SeniorSync Logo"></div>
        <ul class="nav-links">
            <li><a href="e-calendar.html">Calendar</a></li>
            <li><a href="e-finance.html">Finance</a></li>
            <li><a href="e-events.html">Events</a></li>
            <li><a href="e-notifications.html">Notifications</a></li>
            <li><a href="e-profile.html">Profile</a></li>
        </ul>
    </nav>
    <script src="JS/e-navbar.js"></script>
</header>

  <section class="profile-section">
    <h2 id="display-shortname">Welcome xxx</h2>
    <div class="profile-box">
      <div class="profile-left">
        <img src="https://via.placeholder.com/80" alt="Avatar" class="avatar">
        <p id="display-name"><strong>Full Name:</strong> Alexa Rawles</p>
      </div>
      <div class="profile-right">
        <button class="edit-btn">Edit</button>
        <button class="logout-btn">Log out</button>
      </div>
    </div>

    <div class="profile-details">
      <p id="display-gender"><strong>Gender:</strong> Female</p>
      <p id="display-phone"><strong>Phone Number:</strong> 89187210</p>
      <p id="display-dob"><strong>Date of Birth:</strong> 27/06/1950</p>
      <p id="display-email"><strong>Email:</strong> alexarawles@gmail.com</p>
      <p id="display-language"><strong>Preferred Language:</strong> English</p>
      <p id="display-address"><strong>My Address:</strong> Bishan</p>
    </div>
  </section>

    <div class="container2">
      <div class="health-overview">
        <h2>Health Overview</h2>
        <div class="metrics">
          <div class="metric">
            <img src="Assets/Blood Sugar.png">
          </div>
          <div class="metric">
            <img src="Assets/Heart Rate.png">
          </div>
          <div class="metric">
            <img src="Assets/Blood Pressure.png">
          </div>
          <div class="metric">
            <img src="Assets/Oxygen.png">
          </div>
        </div>
      </div>
    </div>

  <section class="medical-list">
        <div class="container">
    <div class="toggle-bar">
      <button id="btn-medical" class="toggle-btn active">Medical Conditions</button>
      <button id="btn-medication" class="toggle-btn">Medications</button>
    </div>

    <div id="content-section">
      <!-- This will be filled dynamically -->
    </div>
  </section>

  <section class="care-taker">
    <h3>Care Taker <button class="add-btn">Add</button></h3>
    <div class="caretaker-list">
      <div class="caretaker-item">
        <img src="https://via.placeholder.com/50" class="avatar">
        <div>
          <p><strong>Margaret Tan</strong></p>
          <p>margarettan78@gmail.com</p>
        </div>
        <button class="view-btn">View Profile</button>
      </div>
      <div class="caretaker-item">
        <img src="https://via.placeholder.com/50" class="avatar">
        <div>
          <p><strong>Max Ng</strong></p>
          <p>maxng7898@gmail.com</p>
        </div>
        <button class="view-btn">View Profile</button>
      </div>
    </div>
  </section>


  <!-- Medical Condition Popup Form -->
  <div id="medical-popup" class="popup-form">
    <div class="popup-content">
      <span class="close-btn" onclick="closePopup('medical-popup')">&times;</span>
      <h3>Add Medical Condition</h3>
      <form id="medical-form">
        <label for="medc-name">Condition Name:</label>
        <input type="text" name="name" id="medc-name" class="medc-autocomplete"required>
        <ul id="medc-suggestions" style="margin-top: 5px;"></ul>
 
        <label for="medc-descr">Description:</label>
        <textarea name="descr" id="medc-descr" rows="3" placeholder="Optional"></textarea>

        <label for="medc-date">Prescription Date:</label>
        <input type="date" name="prescription_date" id="medc-date" required>

        <!-- Optional: Hidden fields for acc_id and mod_id -->
        <input type="hidden" name="acc_id" id="medc-acc-id">
        <input type="hidden" name="mod_id" id="medc-mod-id">

        <button type="submit">Submit</button>
      </form>
    </div>
  </div>

  <div id="medication-popup" class="popup-form">
    <div class="popup-content">
      <span class="close-btn" onclick="closePopup('medication-popup')">&times;</span>
      <h3>Add Medication</h3>
      <form id="medication-form">
        <label for="med-name">Medication Name:</label>
        <input type="text" name="name" id="med-name" class="med-autocomplete"required>
        <ul class="med-suggestions" style="margin-top: 5px; list-style: none;"></ul>

        <label for="med-desc">Description:</label>
        <textarea name="description" id="med-desc" rows="2" placeholder="Optional"></textarea>

        <label for="med-dosage">Dosage:</label>
        <input type="text" name="dosage" id="med-dosage" required>

        <label for="med-time">Time to Take:</label>
        <input type="time" name="time" id="med-time" required>

        <label for="med-frequency">Frequency:</label>
        <select name="frequency" id="med-frequency" required>
          <option value="D">Daily</option>
          <option value="W">Weekly</option>
          <option value="WR">When Required</option>
        </select>

        <div id="weekly-timing-container" style="display:none; margin-top: 10px;">
          <label><strong>Weekly Timings:</strong></label>
          <div id="weekly-timings-list"></div>
          <button type="button" id="add-weekly-time">Add Timing</button>
        </div>

        <label for="med-start-date">Start Date:</label>
        <input type="date" name="start_date" id="med-start-date">

        <!-- Hidden field for account_id -->
        <input type="hidden" name="account_id" id="med-account-id">

        <button type="submit">Submit</button>
      </form>
    </div>
  </div>

  <div id="delete-confirmation-popup" class="popup-form">
    <div class="popup-content">
      <p id="delete-message">Are you sure you want to delete this record?</p> <!-- ðŸ‘ˆ target this -->
      <div class="popup-buttons">
        <button id="confirm-delete-btn">Yes</button>
        <button onclick="closePopup('delete-confirmation-popup')">No</button>
      </div>
    </div>
  </div>

  <!-- View Medication Card -->
  <div id="view-medication-card" class="view-card hidden">
    <div class="view-card-content">
      <h3>Medication Details</h3>
      <p><strong>Name:</strong> <span id="view-med-name"></span></p>
      <p><strong>Description:</strong> <span id="view-med-desc"></span></p>
      <p><strong>Dosage:</strong> <span id="view-med-dosage"></span></p>
      <p><strong>Time:</strong> <span id="view-med-time"></span></p>
      <p><strong>Frequency:</strong> <span id="view-med-frequency"></span></p>
      <p><strong>Start Date:</strong> <span id="view-med-start-date"></span></p>

      <!-- Weekly timings container -->
      <div id="weekly-timings-container" class="hidden">
        <p><strong>Weekly Timings:</strong></p>
        <div id="view-weekly-timings-list" class="timing-records"></div>
      </div>

      <button onclick="closeCard('view-medication-card')">Close</button>
    </div>
  </div>

  <!-- View Medical Condition Card -->
  <div id="view-medical-card" class="view-card hidden">
    <div class="view-card-content">
      <h3>Medical Condition Details</h3>
      <p><strong>Condition Name:</strong> <span id="view-medc-name"></span></p>
      <p><strong>Description:</strong> <span id="view-medc-desc"></span></p>
      <p><strong>Prescription Date:</strong> <span id="view-medc-date"></span></p>
      <button onclick="closeCard('view-medical-card')">Close</button>
    </div>
  </div>

  <!-- Edit Medical Condition Form -->
<div id="edit-medical-condition-popup" class="popup-form">
  <div class="popup-content">
    <span class="close-btn" onclick="closePopup('edit-medical-condition-popup')">&times;</span>
    <h3>Edit Medical Condition</h3>
    <form id="edit-medical-condition-form">
      <div class="form-container">
        <!-- Left side: Medical Condition Information -->
        <div class="left-side">
          <label for="edit-medc-name">Condition Name:</label>
          <input type="text" name="name" id="edit-medc-name" class="medc-autocomplete" required>
                  <ul class="medc-suggestions" style="margin-top: 5px;"></ul>

          <label for="edit-medc-descr">Description:</label>
          <textarea name="descr" id="edit-medc-descr" rows="3" placeholder="Optional"></textarea>

          <label for="edit-medc-date">Prescription Date:</label>
          <input type="date" name="prescription_date" id="edit-medc-date" required>

          <!-- Optional: Hidden fields for acc_id and mod_id -->
          <input type="hidden" name="medc_id" id="edit-medc-id">
        </div>

        <!-- Right side: Associated Medications -->
        <div class="right-side">
          <h4>Associated Medications</h4>
          <div id="associated-medications-list">
            <!-- Dynamically populated list of medications associated with this condition -->
          </div>

          <h4>My Medications</h4>
          <div id="available-medications-list">
            <!-- Dynamically populated list of available medications not yet associated -->
          </div>
        </div>
      </div>

      <button class="mc-save-changes-btn"type="button">Save Changes</button>
    </form>
  </div>
</div>

<!-- Edit Medication Form -->
  <div id="edit-medication-popup" class="popup-form">
    <div class="popup-content">
      <span class="close-btn" onclick="closePopup('edit-medication-popup')">&times;</span>
      <h3>Edit Medication</h3>
      <div class="edit-medication-layout"></div>
      <form id="edit-medication-form">
        <label for="edit-med-name">Medication Name:</label>
        <input type="text" name="name" id="edit-med-name" class="med-autocomplete" required>
        <ul id="med-suggestions" style="margin-top: 5px; list-style: none;"></ul>

        <label for="edit-med-desc">Description:</label>
        <textarea name="description" id="edit-med-desc" rows="2" placeholder="Optional"></textarea>

        <label for="edit-med-dosage">Dosage:</label>
        <input type="text" name="dosage" id="edit-med-dosage" required>

        <label for="edit-med-time">Time to Take:</label>
        <input type="time" name="time" id="edit-med-time">

        <label for="edit-med-frequency">Frequency:</label>
        <select name="frequency" id="edit-med-frequency" required>
          <option value="D">Daily</option>
          <option value="W">Weekly</option>
          <option value="M">Monthly</option>
          <option value="WR">When Required</option>
        </select>

        <label for="edit-med-start-date">Start Date:</label>
        <input type="date" name="start_date" id="edit-med-start-date" required>

        <!-- Hidden field for account_id -->
        <input type="hidden" name="account_id" id="edit-med-id">

        <button class="m-save-changes-btn" type="button">Save Changes</button>
      </form>
      <div id="edit-weekly-timings-editor" class="hidden">
        <h4>Weekly Timings</h4>
        <div id="edit-weekly-timings-list"></div>
        <button type="button" onclick="addWeeklyTiming()">+ Add Timing</button>
      </div>
      </div>
    </div>
</div>





  <div id="footer-placeholder"></div>
  <script src="js/footer.js"></script>
    <script src="JS/e-role.js"></script>
    <script src="JS/e-profile.js"></script>
      <script src="/JS/notificationSystem.js" type="module"></script>
</body>
</html>
